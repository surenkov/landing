{% extends "manager/layout.html" %}
{% import "partial/assets.html" as assets %}

{% block menu %}
<div class="top-bar">
    <div class="top-bar-left">
        <ul class="menu" data-dropdown-menu>
            <li class="menu-text">Панель управления лэндингом</li>
            <li><a href="/" target="_blank">Перейти к сайту</a></li>
        </ul>
    </div>
    <div class="top-bar-right">
        <ul class="menu">
            <li><a class="button" href="{{ url_for('manager.authorize', action='logout') }}">Выйти</a></li>
        </ul>
    </div>
</div>
{% endblock %}


{% block body %}
<div class="body-container">
    <div id="page-preloader">
        <div class="cssload-thecube">
            <div class="cssload-cube cssload-c1"></div>
            <div class="cssload-cube cssload-c2"></div>
            <div class="cssload-cube cssload-c4"></div>
            <div class="cssload-cube cssload-c3"></div>
        </div>
    </div>
    <div id="landing-settings"></div>
    <div id="landing-blocks"></div>
</div>
{% endblock %}


{% block scripts %}
<script type="text/template" id="landing-settings-template">
    <div class="settings row">
        <div class="small-12 medium-10 large-8 small-centered columns">
            <h3>Настройки лэндинга</h3>
            <form id="landing-settings" class="callout settings-form row">
                {{ settings_form.hidden_tag() }}
                <table>
                    {% for field in settings_form if field.widget.input_type != 'hidden' %}
                    <tr>
                        <td>{{ field.label }}</td>
                        <td>{{ field(placeholder=field.description) }}</td>
                    </tr>
                    {% endfor %}
                </table>
                <div class="clearfix">
                    <input type="submit" class="float-right button" value="Сохранить" />
                </div>
            </form>
        </div>
    </div>
</script>

<script type="text/template" id="blocks-container">
    <div class="small-12 medium-10 large-8 small-centered columns">
        <h3>Управление блоками</h3>
        <section class="blocks row"></section>
        <div class="clearfix">
            <div class="button-group float-right">
                <button class="add button"><i class="fi-plus"></i>&nbsp;Добавить блок</button>
                <button class="media-manager button"><i class="fi-photo"></i>&nbsp;Менеджер файлов</button>
            </div>
        </div>
    </div>
</script>

<script id="block-wrapper" type="text/template">
    <form>
        <h3 class="block-head">
            <small class="head-count"></small>
            <span class="head-control"></span>
        </h3>
        <div class="block-container"></div>
        <div class="clearfix">
            <div class="button-group float-right">
                <button class="save button" title="Сохранить блок"><i class="fi-save">&nbsp;</i>Сохранить</button>
                <button class="delete alert button" title="Удалить блок"><i class="fi-x"></i></button>
            </div>
        </div>
    </form>
</script>

<script id="media-view-reveal" type="text/template">
    <h4>Выбор медиа</h4>
    <div class="upload-lead lead">
        <input type="file" class="media-file" name="file" />
        <button type="button" class="expanded secondary upload button">
            <i class="fi-plus"></i>&nbsp;Загрузить файл
        </button>
    </div>
    <table class="hover files">
        <thead>
            <tr>
                <th width="100">Выбрать</th>
                <th>URL-адрес</th>
                <th width="20">Удалить</th>
            </tr>
        </thead>
        <tbody></tbody>
    </table>
    <button class="close-button" data-close aria-label="Close modal" type="button">
        <span aria-hidden="true">&times;</span>
    </button>
</script>

<script id="media-file-view" type="text/template">
    <td colspan="3" class="progress-bar-wrapper">
        <div class="progress-container">
            <div class="progress">
                <div class="progress-bar"></div>
            </div>
        </div>
    </td>
    <td><img src="<%- url %>" class="thumbnail" title="Выбрать файл" /></td>
    <td><input type="text" value="<%- url %>" onClick="this.select();" /></td>
    <td><button class="tiny alert delete button" title="Удалить"><i class="fi-x"></i></button></td>
</script>

<script id="notification-template" type="text/template">
    <p><%= message %></p>
    <button class="close-button" aria-label="Dismiss alert" type="button" data-close>
        <span aria-hidden="true">&times;</span>
    </button>
</script>

<script type="text/javascript" src="{{ url_for('static', filename='dist/jquery.iframe-transport/jquery.iframe-transport.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='dist/underscore/underscore.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='dist/backbone/backbone.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='dist/backbone.marionette/lib/backbone.marionette.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='dist/trumbowyg/dist/trumbowyg.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='dist/trumbowyg/dist/langs/ru.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/manager/bundle.min.js') }}"></script>
{% endblock scripts %}


{% block styles %}
{{ assets.css(blocks, context='manager') }}
{% endblock %}